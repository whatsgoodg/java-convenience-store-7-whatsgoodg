# java-convenience-store-precourse
## 편의점 어플리케이션의 기능

구매자의 할인 혜택과 재고 상황, 프로모션 기간 등을 고려하여 상품 구매시 최종 결제 금액을 계산하고 안내하는 결제 시스템을 구현한다.

- 사용자가 입력한 상품의 가격과 수량을 통해 **최종 결제 금액**을 계산한다.
    - 최종 결제 금액은 **`가격 x 수량`** 에 프로모션 및 멤버십 할인 정책을 반영하여 계산한다.
- 구매 내역과 산출한 금액 정보를 **영수증**으로 출력한다.
- 영수증 출력 후 **추가 구매**를 진행할지 선택할 수 있다.
- 사용자가 잘못된 값을 입력할 경우 **`IllegalArgumentException`** 을 발생시키고 “[ERROR]”로 시작하는 에러 메시지를 출력 후 그 부분부터 다시 입력 받는다.

## 편의점 어플리케이션의 요구 사항

### 재고관리

- 제품 내용은 products.md 파일로부터 읽어온다.
- name, price, quantity, promotion 네 가지의 정보를 저장한다.
- 고객이 제품을 구매하면, 결제된 수량만큼 수량에 반영한다.

### 프로모션 할인

- 프로모션 내용은 promotions.md 파일로부터 읽어온다.
- name, buy, get, start_date, end_date 네 가지의 정보를 저장한다.
- 프로모션은 **`buy+get`** 할인 형태로 진행된다.
- 하나의 제품엔 하나의 프로모션만 적용 가능하다.
- 프로모션 적용이 가능한 상품에 대해 고객이 해당 수량보다 적게 가져온 경우, 필요한 수량을 가져오면 혜택을 받을 수 있음을 알린다.
- 프로모션 재고가 부족하여 일부 수량을  프로모션 혜택 없이 결제해야 하는 경우, 일부 수량에 대해 정가로 결제됨을 알린다.

### 멤버십 할인

- 멤버십 회원은 프로모션 미적용 상품 금액의 30%를 할인받는다.
- 멤버십 할인은 최대 8,000원까지만 가능하다.

### 영수증

- 영수증은 고객의 구매 내역과 할인을 요약하여 출력한다.
- 영수증 항목은 아래와 같다.
    - **구매 상품 내역**
        - 상품명, 수량, 금액
    - **증정 상품 내역**
        - 상품명, 수량
    - **금액 정보**
        - **총구매액**
            - 수량 및 총 구매액
        - **행사할인**
            - 프로모션 할인 금액
        - **멤버십할인**
            - 멤버십 할인 금액
        - **내실돈**
            - 최종 결제 금액

### 영수증 출력 형식

```
===========W 편의점=============
상품명		수량	금액
콜라		10 	10,000
===========증	정=============
콜라		2
==============================
총구매액		10	10,000
행사할인			-2,000
멤버십할인		    -0
내실돈			 8,000
```

---

## **구현할 기능 목록**

### Fron-end

### 사용자 입력 기능

- [x]  구매할 상품명과 수량을 입력받는다.
    - [x]  “구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])”을 출력한다.
    - [x]  **`^(\[[가-힣]+-[1-9]\d*])(,\[[가-힣]+-[1-9]\d*])*$`** 의 정규 표현식의 형식으로 입력을 받는다.
    - [x]  형식에 맞지 않는 입력은 **`IllegalArgumentException`** 을 발생시키고 에러 메시지를 출력한 후 재입력을 받는다.
- [x]  멤버십 할인 여부를 입력받는다.
    - [x]  “멤버십 할인을 받으시겠습니까? (Y/N)”을 출력한다.
    - [x]  Y 또는 N을 입력 받는다.
    - [x]  형식에 맞지 않는 입력은 **`IllegalArgumentException`** 을 발생시키고 에러 메시지를 출력한 후 재입력을 받는다.
- [x]  프로모션 적용이 가능한 상품에 대해 혜택을 받을 것인지에 대한 여부를 입력 받는다.
    - [x]  “현재 {상품명}은(는) %d개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)” 을 출력한다.
    - [x]  Y 또는 N을 입력 받는다.
    - [x]  형식에 맞지 않는 입력은 **`IllegalArgumentException`** 을 발생시키고 에러 메시지를 출력한 후 재입력을 받는다.
- [x]  프로모션 재고가 부족하여 일부 수량을 정가에 구매해야할지에 대한 여부를 입력 받는다.
    - [x]  “현재 {상품명} {수량}개는 프로모션 할인이 적용되지 않습니다. 그래도 구매하시겠습니까? (Y/N)” 를 출력한다.
    - [x]  Y 또는 N을 입력 받는다.
    - [x]  형식에 맞지 않는 입력은 **`IllegalArgumentException`** 을 발생시키고 에러 메시지를 출력한 후 재입력을 받는다.
- [x]  추가 구매 여부를 입력 받는다.
    - [x]  “감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)” 을 출력한다.
    - [x]  Y 또는 N을 입력 받는다.
    - [x]  형식에 맞지 않는 입력은 **`IllegalArgumentException`** 을 발생시키고 에러 메시지를 출력한 후 재입력을 받는다.

### 사용자 출력 기능

- [x]  현재 보유 중인 상품의 정보를 출력한다.
    - [x]  “- [상품명] [가격] [수량] [프로모션]” 형태로 상품들을 출력한다.
- [ ]  영수증을 출력한다.
    - [ ]  위의 **영수증 출력 형식**에 맞게 영수증을 출력한다.

### Back-end

### 재고 관리 기능

- [x]  products.md 파일에서 재고를 읽어온다.
- [x]  해당 재고를 데이터 저장소에 저장하고 관리한다.

### 프로모션 관리 기능

- [x]  promotions.md 파일에서 프로모션을 읽어온다.
- [x]  해당 프로모션들을 데이터 저장소에 저장하고 관리한다.

### 상품 구매 검증 기능

- [x]  사용자로부터 입력받은 상품과 수량에 대해 검증을 수행한다.
    - [x]  해당 상품명이 존재하는지 수량이 넘치지 않는지 검증한다.
        - [x]  상품명이 존재하지 않거나 수량이 초과된다면 **`IllegalArgumentException`** 을 발생시키고 프론트를 통해 에러 메시지를 출력한 후 재입력을 받는다.
    - [x]  프로모션 혜택을 받을 수 있음을 반환한다.
        - [x]  프로모션 혜택을 받을 수 있다면 혜택받을 수 있는 상품 정보를 반환한다.
    - [x]  프로모션 혜택을 받지 못하고 정가에 구매해야하는지 검증한다.
        - [x]  정가에 구매해야한다면 정가에 구매해야하는 상품 정보를 반환한다.

### 프로모션 할인 기능

- [x]  구매할 상품에 대해 프로모션 할인을 수행한다.
    - [x]  구매할 상품에 프로모션이 존재하는지 재고 관리 기능을 통해 확인한다.
    - [x]  프로모션 할인이 적용되는 N개의 상품에 대해 **프로모션이 적용**되었음을 기록한다.
    - [x]  프로모션 할인으로 인해 무료로 받는 1개의 상품에 대해 **증정 상품**임을 기록한다.
- [x]  프로모션 할인이 적용되지 않으면 **아무것도 적용되지 않음**을 기록한다.

### 멤버십 할인 기능

- [x]  구매할 상품에 대해 멤버십 할인을 수행한다.
    - [x]  프로모션 할인이 적용되거나 증정된 상품이 아닌 상품을 선별한다.
    - [x]  해당 상품들에 대해 **멤버십** **할인이 적용됨**을 기록한다.
- [x]  멤버십 할인이 적용되지 않으면 **아무것도 적용되지 않음**을 기록한다.

### 상품 결제 기능

- [ ]  사용자가 구매할 상품에 대한 결제를 수행한다.
    - [ ]  프로모션이 적용된 상품의 가격을 모두 더한다.
    - [ ]  멤버십 할인이 적용된 상품의 가격을 모두 더하고 30% 할인을 수행한다.
    - [ ]  해당 가격들을 모두 더한다.
    - [ ]  위의 정보들을 통해 **영수증**을 생성한다.
- [ ] 구매한 상품에 대한 재고 정보를 모두 데이터 저장소에 반영한다.